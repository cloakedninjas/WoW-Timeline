<?php

$data = array();
$i = 0;

foreach ($this->char->achievements_by_day as $day=>$achvs) {
	$achvs = explode(',', $achvs);

	$obj = new stdClass();
	$obj->y = date("Y", $day);
	$obj->m = date("M", $day);
	$obj->mm = date("m", $day);
	$obj->da = date("j", $day);
	
	$obj->a = array();
	$obj->d = array();

	foreach ($achvs as $a) {
		$i++;
		$obj->a[] = $this->achievement_ref[$a]->name;
		$obj->d[] = $this->achievement_ref[$a]->description;
	}

	$data[] = $obj;

	if ($i >= $this->char->load_count) {
		break;
	}
}

?>

<script type="text/javascript">
Timeline.data = <?php echo json_encode($data); ?>;

$(document).ready(function() {
	Timeline.init();
});
</script>

<div id="header">

	<div class="profile">
		<div class="thumb" style="background-image: url(http://eu.battle.net/static-render/eu/lightbringer/190/34244286-avatar.jpg)"></div>
		<h1><span class="name">Halbu</span><span class="title">, the awesome</span></h1>
		<h2>&lt; Untouchables &gt;</h2>
		<h3>
			<span class="level">85</span><span class="race">Night Elf</span><span class="class c6">Death Knight</span>
		</h3>
	</div>
</div>

<div id="timeline">
	<div id="time_index"></div>
	<div class="entries"></div>
	<div class="clear"></div>
</div>

<div id="entry_template" class="entry">
	<span class="date"></span>
	<span class="l"></span>
</div>